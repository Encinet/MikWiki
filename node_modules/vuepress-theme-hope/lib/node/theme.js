"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.themeHope = void 0;
const utils_1 = require("@vuepress/utils");
const alias_1 = require("./alias");
const bundler_1 = require("./bundler");
const handleThemeData_1 = require("./handleThemeData");
const extends_1 = require("./extends");
const layout_1 = require("./layout");
const plugins_1 = require("./plugins");
const themeColor_1 = require("./themeColor");
const themeHope = ({ plugins = {}, ...themeOptions }, app) => {
    (0, bundler_1.updateBundlerOptions)(app);
    (0, handleThemeData_1.handleThemeData)(app, themeOptions);
    (0, plugins_1.usePlugin)(app, plugins);
    return {
        name: "vuepress-theme-hope",
        alias: (0, alias_1.getAlias)(app),
        define: () => ({
            ENABLE_BLOG: Boolean(plugins.blog),
        }),
        extendsPage: (page) => (0, extends_1.extendsPage)(themeOptions, plugins, page, app.env.isDev),
        async onPrepared() {
            await (0, themeColor_1.writeThemeColorScss)(app, themeOptions);
        },
        plugins: (0, plugins_1.getPluginConfig)(app, plugins, themeOptions),
        layouts: (0, layout_1.getLayoutConfig)(app, plugins),
        templateBuild: utils_1.path.resolve(__dirname, "../../templates/index.build.html"),
        clientAppEnhanceFiles: [
            utils_1.path.resolve(__dirname, "../client/appEnhance.js"),
            ...(plugins.blog
                ? [utils_1.path.resolve(__dirname, "../client/module/blog/appEnhance.js")]
                : []),
        ],
        clientAppSetupFiles: [
            ...(plugins.blog
                ? [utils_1.path.resolve(__dirname, "../client/module/blog/appSetup.js")]
                : []),
            utils_1.path.resolve(__dirname, "../client/module/outlook/appSetup.js"),
            utils_1.path.resolve(__dirname, "../client/module/sidebar/appSetup.js"),
        ],
    };
};
exports.themeHope = themeHope;
//# sourceMappingURL=theme.js.map