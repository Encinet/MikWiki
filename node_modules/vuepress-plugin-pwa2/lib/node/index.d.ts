import { LocaleConfig, Plugin, PluginConfig } from '@vuepress/core';
import { GenerateSWOptions } from 'workbox-build';
import { ConvertLocaleConfig } from '@mr-hope/vuepress-shared';

interface PWALocaleData {
    /**
     * Install button text
     *
     * 安装按钮文字
     */
    install: string;
    /**
     * iOS install hint text
     *
     * iOS 安装文字
     */
    iOSInstall: string;
    /**
     * Cancel button text
     *
     * 取消按钮文字
     */
    cancel: string;
    /**
     * Close button text
     *
     * 关闭按钮文字
     */
    close: string;
    /**
     * Previous image text
     *
     * 上一张图片文字
     */
    prevImage: string;
    /**
     * Next image text
     *
     * 下一张图片文字
     */
    nextImage: string;
    /**
     * Install explain text
     *
     * 安装解释
     */
    explain: string;
    /**
     * Description label text
     *
     * 描述标签文字
     */
    desc: string;
    /**
     * Feature label text
     *
     * 特性标签文字
     */
    feature: string;
    /**
     * Update label text
     *
     * 更新内容标签文字
     */
    update: string;
}
declare type PWALocaleConfig = ConvertLocaleConfig<PWALocaleData>;

interface ManifestImage {
    src: string;
    sizes: string;
    type?: string;
}
interface ManifestIcon extends ManifestImage {
    purpose?: "any" | "maskable" | "monochrome";
}
interface ManifestRelatedApps {
    platform: string;
    url: string;
    id?: string;
}
interface ManifestShortCuts {
    name: string;
    url: string;
    short_name?: string;
    description?: string;
    icons?: ManifestIcon[];
}
interface ManifestOption {
    name?: string;
    short_name?: string;
    description?: string;
    background_color?: string;
    dir?: "ltr" | "rtl" | "auto";
    lang?: string;
    display?: "fullscreen" | "standalone" | "minimal-ui" | "browser";
    icons?: ManifestIcon[];
    orientation?: "any" | "natural" | "landscape" | "landscape-primary" | "landscape-secondary" | "portrait" | "portrait-primary" | "portrait-secondary";
    prefer_related_applications?: boolean;
    related_applications?: ManifestRelatedApps[];
    scope?: string;
    start_url?: string;
    theme_color?: string;
    categories?: string[];
    shortcuts?: ManifestShortCuts[];
    iarc_rating_id?: string;
    features?: string[];
    screenshots?: ManifestImage[];
}

interface ApplePWAOptions {
    /**
     * Path of icon used on apple devices
     *
     * Recommand 152×152 size
     *
     * 苹果上使用的图标路径
     *
     * 推荐 152×152 大小
     */
    icon?: string;
    /**
     * Color of status bar
     *
     * 状态栏的颜色
     *
     * @default 'black'
     */
    statusBarColor?: "black" | "white";
    /**
     * Safari mask icon
     *
     * Safari 图标
     */
    maskIcon?: string;
}
interface MicrosoftPWAOptions {
    /**
     * Microsoft tile image
     *
     * 144×144 transperent recommanded
     *
     * 微软磁贴图片
     *
     * 推荐 144×144，透明
     */
    image?: string;
    /**
     * tile color
     *
     * 磁贴颜色
     */
    color?: string;
}
/** PWA 配置 */
interface PWAOptions {
    /**
     * Service Worker file path
     *
     * Service Worker 文件路径
     *
     * @default 'service-worker.js'
     */
    swPath?: string;
    /**
     * Whether display install button
     *
     * 是否显示安装按钮
     *
     * @default true
     */
    showInstall?: boolean;
    /**
     * manifest file Config
     *
     * manifest 文件设置
     */
    manifest?: ManifestOption;
    /**
     * Path of favico
     *
     * favico 地址
     */
    favicon?: string;
    /**
     * Theme Color
     *
     * 主题色
     *
     * @default "#46bd87"
     */
    themeColor?: string;
    /**
     * Max size which allows to cache, with KB unit
     *
     * 允许缓存的最大大小，单位 KB
     *
     * @default 2048
     */
    maxSize?: number;
    /**
     * Whether cache html files besides home page and 404
     *
     * 是否缓存除主页与 404 之外的 HTML
     *
     * @default true
     */
    cacheHTML?: boolean;
    /**
     * Whether cache pictures
     *
     * 是否缓存站点图片
     *
     * @default false
     */
    cachePic?: boolean;
    /**
     * Max size which allows to cache, with KB unit
     *
     * 图片允许缓存的最大大小，单位 KB
     *
     * @default 1024
     */
    maxPicSize?: number;
    /**
     * settings for apple
     *
     * 苹果设置
     */
    apple?: ApplePWAOptions | false;
    /**
     * Settings for Microsoft
     *
     * 微软设置
     */
    msTile?: MicrosoftPWAOptions | false;
    /**
     * A custom component to replace the default popup component.
     *
     * 用于替换默认弹出组件的自定义组件。
     *
     * @default 'SWUpdatePopup'
     */
    popupComponent?: string;
    /**
     * workbox-build’s [generateSW config](https://developers.google.com/web/tools/workbox/modules/workbox-build#full_generatesw_config)
     *
     */
    generateSWConfig?: GenerateSWOptions;
    /**
     * Locales config
     *
     * 国际化配置
     */
    locales?: LocaleConfig<PWALocaleData>;
}

declare const pwaPlugin: Plugin<PWAOptions>;
declare const pwa: (options: PWAOptions | false) => PluginConfig<PWAOptions>;

export { ManifestIcon, ManifestImage, ManifestOption, ManifestRelatedApps, ManifestShortCuts, PWALocaleConfig, PWALocaleData, PWAOptions, pwaPlugin as default, pwa, pwaPlugin };
