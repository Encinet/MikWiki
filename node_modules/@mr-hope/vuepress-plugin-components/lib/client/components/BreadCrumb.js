import{resolveRouteWithRedirect as e}from"@mr-hope/vuepress-shared/lib/client";import{usePageFrontmatter as t,useRouteLocale as r}from"@vuepress/client";import{defineComponent as o,ref as a,computed as n,onMounted as l,watch as p,onUnmounted as s,h as i}from"vue";import{useRouter as u,useRoute as c,RouterLink as m}from"vue-router";import{removeEndingSlash as h}from"@vuepress/shared";import"../styles/breadcrumb.scss";var f=o({name:"BreadCrumb",props:{show:{type:Boolean,default:!0},icon:{type:Boolean,default:!0},iconPrefix:{type:String,default:""}},setup(o){const f=t(),v=u(),b=c(),d=r(),y=a([]),g=n((()=>{const e=f.value.breadcrumb;return(o.show&&!1!==e||!0===e)&&y.value.length>1})),B=n((()=>{const e=f.value.breadcrumbIcon;return g.value&&(o.icon&&!1!==e||!0===e)})),w=()=>{const t=v.getRoutes(),r=((e,t)=>{const r=e.path.replace(t,"/").split("/"),o=[];let a=h(t);return r.forEach(((e,t)=>{t!==r.length-1?(a+=`${e}/`,o.push(a)):""!==e&&(a+=e,o.push(a))})),o})(b,d.value).map((r=>{const o=t.find((e=>e.path===r));if(o){const{meta:t,path:r}=e(v,o.path);if("string"==typeof t.title)return{title:t.title,icon:t.icon,path:r}}return null})).filter((e=>null!==e));r.length>1&&(y.value=r)};let x;return l((()=>{w(),x=p((()=>b.path),w)})),s((()=>{x()})),()=>i("nav",{class:["breadcrumb",{disable:!g.value}]},g.value?i("ol",{vocab:"https://schema.org/",typeof:"BreadcrumbList"},y.value.map(((e,t)=>i("li",{class:{"is-active":y.value.length-1===t},property:"itemListElement",typeof:"ListItem"},i(m,{to:e.path,property:"item",typeof:"WebPage"},(()=>[e.icon&&B.value?i("i",{class:["icon",`${o.iconPrefix}${e.icon}`]}):null,i("span",{property:"name"},e.title||"Unknown"),i("meta",{property:"position",content:t+1})])))))):[])}});export{f as default};
//# sourceMappingURL=BreadCrumb.js.map
